"use strict";(self["webpackChunkfrontent_spa"]=self["webpackChunkfrontent_spa"]||[]).push([[954],{1875:function(t,e,r){function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function a(t,e){if("object"!==s(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!==s(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function i(t){var e=a(t,"string");return"symbol"===s(e)?e:String(e)}function o(t,e,r){return e=i(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r.d(e,{Z:function(){return n}});r(560);class n{constructor(t,e){o(this,"data",void 0),o(this,"rules",void 0),o(this,"result",{}),o(this,"stopValidate",!1),this.data=t,this.rules=e}makeValidation(){return this.rules.forEach((t=>{const e=Object.keys(t)[0],r=Object.values(t)[0],s=r.split("|");for(const a of s){if(this.stopValidate){this.stopValidate=!1;break}const t=a.split(":");switch(t[0]){case"required":this.required(e)&&(this.stopValidate=!0);break;case"min":this.min(e,parseInt(t[1]))&&(this.stopValidate=!0);break;case"max":this.max(e,parseInt(t[1]))&&(this.stopValidate=!0);break;case"email":this.email(e)&&(this.stopValidate=!0);break;case"same":this.same(e,t[1])&&(this.stopValidate=!0);break}}})),this.result}check(){return 0===Object.keys(this.result).length}required(t){const e="Поле обязательно для заполнения";return 0===this.data[t].length&&(Object.prototype.hasOwnProperty.call(this.result,t)||(this.result[t]=[]),this.result[t].push(e),!0)}min(t,e){const r=`Минимальная длина поля - ${e} символов`;return this.data[t].length<e&&(Object.prototype.hasOwnProperty.call(this.result,t)||(this.result[t]=[]),this.result[t].push(r),!0)}max(t,e){const r=`Максимальная длина поля - ${e} символов`;return this.data[t].length>e&&(Object.prototype.hasOwnProperty.call(this.result,t)||(this.result[t]=[]),this.result[t].push(r),!0)}email(t){const e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,r=e.test(String(this.data[t]).toLowerCase());if(!r){const e="Email некорректный";return Object.prototype.hasOwnProperty.call(this.result,t)||(this.result[t]=[]),this.result[t].push(e),!0}return!1}same(t,e){const r="Пароли не совпадают";return this.data[t]!=this.data[e]&&(Object.prototype.hasOwnProperty.call(this.result,t)||(this.result[t]=[]),this.result[t].push(r),!0)}}},3908:function(t,e,r){var s=r(1037);const a=(0,s.lm)();e.Z={methods:{NotifyMixin(t,e,r,s=1e3,i=1e3){a.notify({title:t,text:e,type:r,duration:i,speed:s})}}}},8863:function(t,e,r){r.r(e),r.d(e,{default:function(){return k}});var s=r(3396),a=r(9242),i=r(7139);const o={for:"login",class:"wrapper-field"},n={key:0,class:"error_block"},l={for:"password",class:"wrapper-field"},u={key:0,class:"error_block"},c={class:"d-flex flex-x-right flex-y-center"},h=(0,s._)("p",{class:"info"},[(0,s._)("a",{href:"/registration"},"Регистрация"),(0,s.Uk)(" в системе ")],-1);function p(t,e,r,p,m,d){return(0,s.wg)(),(0,s.iD)("form",{onSubmit:e[3]||(e[3]=(0,a.iM)((()=>{}),["prevent"])),class:"login-block"},[(0,s._)("label",o,[(0,s.Uk)(" Email адрес: "),(0,s.wy)((0,s._)("input",{type:"email",class:"input-text-element",id:"login",name:"login",autocomplete:"off","onUpdate:modelValue":e[0]||(e[0]=e=>t.userForm.email=e)},null,512),[[a.nr,t.userForm.email]]),t.validation_errors.hasOwnProperty("email")?((0,s.wg)(),(0,s.iD)("div",n,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.validation_errors["email"],(t=>((0,s.wg)(),(0,s.iD)("span",{key:t},"- "+(0,i.zw)(t),1)))),128))])):(0,s.kq)("",!0)]),(0,s._)("label",l,[(0,s.Uk)(" Пароль: "),(0,s.wy)((0,s._)("input",{type:"password",id:"password",name:"password",class:"input-text-element",autocomplete:"off","onUpdate:modelValue":e[1]||(e[1]=e=>t.userForm.password=e)},null,512),[[a.nr,t.userForm.password]]),t.validation_errors.hasOwnProperty("password")?((0,s.wg)(),(0,s.iD)("div",u,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.validation_errors["password"],(t=>((0,s.wg)(),(0,s.iD)("span",{key:t},"- "+(0,i.zw)(t),1)))),128))])):(0,s.kq)("",!0)]),(0,s._)("div",c,[(0,s._)("button",{class:"btn btn-danger",onClick:e[2]||(e[2]=(...e)=>t.makeAuth&&t.makeAuth(...e))},"Войти")]),h],32)}r(560);var m=r(1875),d=r(65),f=r(3908),y=(0,s.aZ)({name:"HomeController",mixins:[f.Z],components:{},data(){return{userForm:{email:"",password:""},validation_errors:{}}},methods:{...(0,d.nv)(["API_auth","setAuth"]),makeAuth(){const t=new m.Z(this.userForm,[{email:"required|min:1|max:50|email"},{password:"required|min:8|max:32"}]);this.validation_errors=t.makeValidation(),t.check()&&this.API_auth(this.userForm).then((t=>{const e=t.data.data.access_token,r=t.data.data.name;this.NotifyMixin("Успешно",`${r} Вы успешно авторизировались!`,"success"),localStorage.setItem("access_token",e),this.setAuth(!0),this.$router.push({name:"DashboardController"})})).catch((()=>!0))}},created(){localStorage.getItem("access_token")&&this.$router.push({name:"DashboardController"})}}),b=r(89);const w=(0,b.Z)(y,[["render",p]]);var k=w}}]);
//# sourceMappingURL=HomeController.47acb78e.js.map