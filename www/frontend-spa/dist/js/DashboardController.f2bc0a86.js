"use strict";(self["webpackChunkfrontent_spa"]=self["webpackChunkfrontent_spa"]||[]).push([[361],{1875:function(t,e,s){function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function o(t,e){if("object"!==i(t)||null===t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var o=s.call(t,e||"default");if("object"!==i(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function r(t){var e=o(t,"string");return"symbol"===i(e)?e:String(e)}function a(t,e,s){return e=r(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}s.d(e,{Z:function(){return n}});s(560);class n{constructor(t,e){a(this,"data",void 0),a(this,"rules",void 0),a(this,"result",{}),a(this,"stopValidate",!1),this.data=t,this.rules=e}makeValidation(){return this.rules.forEach((t=>{const e=Object.keys(t)[0],s=Object.values(t)[0],i=s.split("|");for(const o of i){if(this.stopValidate){this.stopValidate=!1;break}const t=o.split(":");switch(t[0]){case"required":this.required(e)&&(this.stopValidate=!0);break;case"min":this.min(e,parseInt(t[1]))&&(this.stopValidate=!0);break;case"max":this.max(e,parseInt(t[1]))&&(this.stopValidate=!0);break;case"email":this.email(e)&&(this.stopValidate=!0);break;case"same":this.same(e,t[1])&&(this.stopValidate=!0);break}}})),this.result}check(){return 0===Object.keys(this.result).length}required(t){const e="Поле обязательно для заполнения";return 0===this.data[t].length&&(Object.prototype.hasOwnProperty.call(this.result,t)||(this.result[t]=[]),this.result[t].push(e),!0)}min(t,e){const s=`Минимальная длина поля - ${e} символов`;return this.data[t].length<e&&(Object.prototype.hasOwnProperty.call(this.result,t)||(this.result[t]=[]),this.result[t].push(s),!0)}max(t,e){const s=`Максимальная длина поля - ${e} символов`;return this.data[t].length>e&&(Object.prototype.hasOwnProperty.call(this.result,t)||(this.result[t]=[]),this.result[t].push(s),!0)}email(t){const e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,s=e.test(String(this.data[t]).toLowerCase());if(!s){const e="Email некорректный";return Object.prototype.hasOwnProperty.call(this.result,t)||(this.result[t]=[]),this.result[t].push(e),!0}return!1}same(t,e){const s="Пароли не совпадают";return this.data[t]!=this.data[e]&&(Object.prototype.hasOwnProperty.call(this.result,t)||(this.result[t]=[]),this.result[t].push(s),!0)}}},3908:function(t,e,s){var i=s(1037);const o=(0,i.lm)();e.Z={methods:{NotifyMixin(t,e,s,i=1e3,r=1e3){o.notify({title:t,text:e,type:s,duration:r,speed:i})}}}},2704:function(t,e,s){s.r(e),s.d(e,{default:function(){return W}});var i=s(3396),o=s(9242),r=s(7139);const a={class:"dashboard-wrapper"},n={class:"popup-append"},l={for:"title",class:"wrapper-field"},d={key:0,class:"error_block"},c={for:"login",class:"wrapper-field"},p={key:0,class:"error_block"},u={class:"d-flex flex-x-right flex-y-center"},h={for:"password",class:"wrapper-field"},m={key:0,class:"error_block"},w={for:"login",class:"wrapper-field"},y={key:0,class:"error_block"},b={class:"d-flex flex-y-center flex-x-right"},f={class:"dashboard-block"},g={class:"d-flex flex-x-right flex-y-center"},k={key:0,class:"dashboardItem"},_=(0,i._)("div",{class:"item-header"},[(0,i._)("p",null,"Ни одной записи еще не добавлено...")],-1),v=[_],x=["onClick"],P={key:0,class:"item-footer"},D=["onClick"],C=["onClick"];function I(t,e,s,_,I,O){const q=(0,i.up)("DashboardItem");return(0,i.wg)(),(0,i.iD)("div",a,[t.popup_visible?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"popup-wrapper",onClick:e[8]||(e[8]=(0,o.iM)((e=>t.popup_visible=!t.popup_visible),["self"]))},[(0,i._)("div",n,[(0,i._)("form",{onSubmit:e[7]||(e[7]=(0,o.iM)((()=>{}),["prevent"]))},[(0,i._)("label",l,[(0,i.Uk)(" Заголовок (обязательное поле): "),(0,i.wy)((0,i._)("input",{type:"text",class:"input-text-element",id:"title",name:"title",autocomplete:"off","onUpdate:modelValue":e[0]||(e[0]=e=>t.userForm.title=e)},null,512),[[o.nr,t.userForm.title]]),t.validation_errors.hasOwnProperty("title")?((0,i.wg)(),(0,i.iD)("div",d,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.validation_errors["title"],(t=>((0,i.wg)(),(0,i.iD)("span",{key:t},"- "+(0,r.zw)(t),1)))),128))])):(0,i.kq)("",!0)]),(0,i._)("label",c,[(0,i.Uk)(" Login (email | username): "),(0,i.wy)((0,i._)("input",{type:"text",class:"input-text-element",id:"login",name:"login",autocomplete:"off","onUpdate:modelValue":e[1]||(e[1]=e=>t.userForm.login=e)},null,512),[[o.nr,t.userForm.login]]),t.validation_errors.hasOwnProperty("login")?((0,i.wg)(),(0,i.iD)("div",p,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.validation_errors["login"],(t=>((0,i.wg)(),(0,i.iD)("span",{key:t},"- "+(0,r.zw)(t),1)))),128))])):(0,i.kq)("",!0)]),(0,i._)("div",u,[(0,i._)("label",h,[(0,i.Uk)(" Пароль: "),(0,i.wy)((0,i._)("input",{type:"text",class:"input-text-element",id:"password",name:"password",autocomplete:"off","onUpdate:modelValue":e[2]||(e[2]=e=>t.userForm.password=e)},null,512),[[o.nr,t.userForm.password]]),t.validation_errors.hasOwnProperty("password")?((0,i.wg)(),(0,i.iD)("div",m,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.validation_errors["password"],(t=>((0,i.wg)(),(0,i.iD)("span",{key:t},"- "+(0,r.zw)(t),1)))),128))])):(0,i.kq)("",!0)]),(0,i._)("button",{class:"btn btn-warning ml-2",onClick:e[3]||(e[3]=(0,o.iM)(((...e)=>t.generatePassword&&t.generatePassword(...e)),["self"]))}," Генерировать ")]),(0,i._)("label",w,[(0,i.Uk)(" Описание (опционально): "),(0,i.wy)((0,i._)("textarea",{class:"input-textarea-element",id:"description",name:"description",autocomplete:"off","onUpdate:modelValue":e[4]||(e[4]=e=>t.userForm.description=e)},null,512),[[o.nr,t.userForm.description]]),t.validation_errors.hasOwnProperty("description")?((0,i.wg)(),(0,i.iD)("div",y,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.validation_errors["description"],(t=>((0,i.wg)(),(0,i.iD)("span",{key:t},"- "+(0,r.zw)(t),1)))),128))])):(0,i.kq)("",!0)]),(0,i._)("div",b,["add"===t.popup_mode?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"btn btn-danger",onClick:e[5]||(e[5]=(...e)=>t.makeRecord&&t.makeRecord(...e))}," Добавить ")):(0,i.kq)("",!0),"edit"===t.popup_mode?((0,i.wg)(),(0,i.iD)("button",{key:1,class:"btn btn-danger",onClick:e[6]||(e[6]=(...e)=>t.makeEdit&&t.makeEdit(...e))}," Редактировать ")):(0,i.kq)("",!0)])],32)])])):(0,i.kq)("",!0),(0,i._)("div",f,[(0,i._)("div",g,[(0,i._)("button",{class:"btn btn-success",onClick:e[9]||(e[9]=(...e)=>t.appendItem&&t.appendItem(...e))}," Добавить запись ")]),(0,i.Uk)(" "+(0,r.zw)()+" ",1),0===Object.keys(t.resultList).length?((0,i.wg)(),(0,i.iD)("div",k,v)):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.resultList,(e=>((0,i.wg)(),(0,i.j4)(q,{key:e.id,data:e,visible:t.visible},{header:(0,i.w5)((()=>[(0,i._)("div",{class:(0,r.C_)(["item-header",{active:t.visible.includes(e.id)}]),onClick:s=>t.makeVisible(e.id)}," .:: "+(0,r.zw)(e.title),11,x)])),footer:(0,i.w5)((()=>[t.visible.includes(e.id)?((0,i.wg)(),(0,i.iD)("div",P,[(0,i._)("button",{class:"btn btn-warning mr-2",onClick:s=>t.editItem(e)}," Редактировать ",8,D),(0,i._)("button",{class:"btn btn-danger",onClick:s=>t.deleteItem(e.id)}," Удалить ",8,C)])):(0,i.kq)("",!0)])),_:2},1032,["data","visible"])))),128))])])}s(560);const O={class:"dashboardItem"},q={key:0,class:"item-body"},S={class:"double-panel"},F={class:"block-credential"},L=(0,i._)("p",{class:"title"},"Login",-1),V={class:"content"},j={class:"block-credential"},z=(0,i._)("p",{class:"title"},"Password",-1),E={class:"block-credential"},M=(0,i._)("p",{class:"title"},"Описание:",-1),A={class:"pre"};function U(t,e,s,a,n,l){return(0,i.wg)(),(0,i.iD)("div",O,[(0,i.WI)(t.$slots,"header"),t.visible.includes(t.data.id)?((0,i.wg)(),(0,i.iD)("div",q,[(0,i._)("div",S,[(0,i._)("div",F,[L,(0,i._)("p",V,[(0,i.Uk)((0,r.zw)(t.data.login)+" ",1),(0,i._)("img",{src:"/images/copy_icon_2.png",class:"copy",onClick:e[0]||(e[0]=e=>t.copy("login"))})])]),(0,i._)("div",j,[z,(0,i._)("p",{class:"content",onClick:e[2]||(e[2]=e=>t.showShortPassword=!t.showShortPassword)},[t.showShortPassword?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[(0,i.Uk)((0,r.zw)(t.shortPassword),1)],64)):(0,i.kq)("",!0),t.showShortPassword?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[(0,i.Uk)((0,r.zw)(t.data.password),1)],64)),(0,i._)("img",{src:"/images/copy_icon_2.png",class:"copy",onClick:e[1]||(e[1]=(0,o.iM)((e=>t.copy("password")),["stop"]))})])])]),(0,i._)("div",E,[M,(0,i._)("pre",A,(0,r.zw)(t.data.description),1)])])):(0,i.kq)("",!0),(0,i.WI)(t.$slots,"footer")])}var Z=s(65),N=s(3908),H=(0,i.aZ)({name:"DashboardItem",mixins:[N.Z],props:{data:{type:Object,required:!0},visible:{type:Array,required:!0}},computed:{...(0,Z.Se)(["eventBusOn"]),shortPassword(){return this.data.password.slice(0,3)+"**********"}},data(){return{showShortPassword:!0}},watch:{eventBusOn:function(t){const e=JSON.parse(JSON.stringify(t));e.name}},methods:{copyLoginSuccess(){this.NotifyMixin("Скопировано","Ваш логин скопирован","success")},copyLoginError(){this.NotifyMixin("Ошибка копирования","К сожалению, копирование в вашем браузере не работает, сделайте это самостоятельно","error")},copyPasswordSuccess(){this.NotifyMixin("Скопировано","Ваш пароль скопирован","success")},copyPasswordError(){this.NotifyMixin("Ошибка копирования","К сожалению, копирование в вашем браузере не работает, сделайте это самостоятельно","error")},copy(t){if("login"===t){const t=document.createElement("textarea");t.value=this.data.login,t.style.top="-2000px",t.style.left="-2000px",t.style.position="fixed",document.body.appendChild(t),t.focus(),t.select();try{const t=document.execCommand("copy");t?this.copyLoginSuccess():this.copyLoginError()}catch(e){this.copyLoginError()}document.body.removeChild(t)}else if("password"===t){const t=document.createElement("textarea");t.value=this.data.password,t.style.top="-2000px",t.style.left="-2000px",t.style.position="fixed",document.body.appendChild(t),t.focus(),t.select();try{const t=document.execCommand("copy");t?this.copyPasswordSuccess():this.copyPasswordError()}catch(e){this.copyPasswordError()}document.body.removeChild(t)}}},created(){}}),Y=s(89);const K=(0,Y.Z)(H,[["render",U]]);var $=K,B=s(1875),R=(0,i.aZ)({name:"DashboardView",mixins:[N.Z],components:{DashboardItem:$},computed:{...(0,Z.Se)(["resultList"])},data(){return{userForm:{title:"",login:"",password:"",description:"",id:""},validation_errors:{},popup_visible:!1,visible:[],popup_mode:"add"}},methods:{...(0,Z.nv)(["API_get_list","API_append_list","eventBusCommit","API_delete_list","API_edit_list"]),...(0,Z.OI)(["mutateList"]),randomize(t){let e,s=t.length;while(0!=s)e=Math.floor(Math.random()*s),s--,[t[s],t[e]]=[t[e],t[s]];return t},generatePassword(){const t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()-_{}[]?",e=this.randomize(t.split(""));let s=[];for(let i=0;i<16;i++)s.push(e[i]);this.userForm.password=s.join("")},makeRecord(){const t=new B.Z(this.userForm,[{title:"required|min:2|max:150"},{login:"required|min:2|max:150"},{password:"required|min:8|max:64"}]);this.validation_errors=t.makeValidation(),t.check()&&this.API_append_list(this.userForm).then((()=>{this.userForm={title:"",login:"",password:"",description:"",id:""},this.getList(),this.popup_visible=!1,this.visible=[],this.NotifyMixin("Успешно","Запись успешно добавлена","success")})).catch((()=>!0))},makeEdit(){const t=new B.Z(this.userForm,[{title:"required|min:2|max:150"},{login:"required|min:2|max:150"},{password:"required|min:8|max:64"}]);this.validation_errors=t.makeValidation(),t.check()&&this.API_edit_list(this.userForm).then((()=>{this.userForm={title:"",login:"",password:"",description:"",id:""},this.getList(),this.popup_visible=!1,this.visible=[],this.NotifyMixin("Успешно","Запись успешно изменена","success")})).catch((()=>!0))},getList(){this.API_get_list().then((t=>{this.mutateList(t?.data?.data??[])}))},makeVisible(t){this.visible.includes(t)?this.visible=this.visible.filter((e=>e!==t)):this.visible.push(t)},deleteItem(t){window.confirm("Точно удалить?")&&this.API_delete_list({id:t}).then((()=>{this.getList()})).catch((()=>!0))},editItem(t){this.userForm={title:t.title,login:t.login,password:t.password,id:t.id,description:t.description},this.popup_visible=!0,this.popup_mode="edit"},appendItem(){this.eventBusCommit({name:"showAlert",payload:{}}),this.userForm={title:"",login:"",password:"",id:"",description:""},this.popup_visible=!0,this.popup_mode="add"}},created(){this.getList()}});const J=(0,Y.Z)(R,[["render",I]]);var W=J}}]);
//# sourceMappingURL=DashboardController.f2bc0a86.js.map